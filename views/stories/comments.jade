h3.text-left
    div#comment-list.comment-list

        script(src="https://cdn.jsdelivr.net/ramda/0.10.0/ramda.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js")
        script.
            var commentDetails;
            R.forEach(function displayComments(comment) {
                console.log('this is the comment id', comment);
                $.ajax({
                    type: 'GET',
                    url: '/stories/comments/' + comment,
                    error: function(xhr, textStatus, errorThrown) {
                        console.log('got error');
                        commentDetails = {
                            error: true,
                            body: 'There seems to be a problem fetching this comment.'
                        }
                    },
                    success: function (data, textStatus, xhr) {
                        console.log(data);
                        commentDetails = data;
                        var div = document.createElement('div');
                        $(div)
                                .html("" +
                                    "<div class='row'>" +
                                        "<div class='col-xs-3 col-sm-1 text-center'>" +
                                            "<div class='row'>" +
                                                "<div class='col-xs-12 big-ion-up-arrow'>" +
                                                    "<i class='ion-arrow-up-b'></i>" +
                                                "</div>" +
                                            "</div>" +
                                            "<div class='row'>" +
                                                "<div class='col-xs-12'>" +
                                                    commentDetails.rank +
                                                "</div>" +
                                            "</div>" +
                                        "</div>" +
                                        "<div class='col-xs-2 col-sm-1'>" +
                                            "<img class='img-responsive' src=" + commentDetails.author.picture + "></img>" +
                                        "</div>" +
                                        "<div class='col-xs-7 col-sm-10'>" +
                                            "<div class='row'>" +
                                                "<div class='col-xs-12'>" +
                                                    commentDetails.body +
                                                "</div>" +
                                            "</div>" +
                                            "<div class='row'>" +
                                                "<div class='col-xs-12'>" +
                                                    "commented " + moment(commentDetails.commentedOn).fromNow() + " by " +
                                                    "<a href='/" + commentDetails.author.username + "'>@" + commentDetails.author.username + "</a>" +
                                                "</div>" +
                                            "</div>" +
                                        "</div>" +
                                    "</div>" +
                                "</div>")
                                .appendTo($('#comment-list'));
                    }


                })

            }, comments);