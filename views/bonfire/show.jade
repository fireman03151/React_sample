extends ../layout
block content

    script(src='/js/lib/codemirror/lib/codemirror.js')
    script(src='/js/lib/codemirror/addon/edit/closebrackets.js')
    script(src='/js/lib/codemirror/addon/edit/matchbrackets.js')
    script(src='/js/lib/codemirror/addon/lint/lint.js')
    script(src='/js/lib/codemirror/addon/lint/javascript-lint.js')
    script(src='//ajax.aspnetcdn.com/ajax/jshint/r07/jshint.js')
    script(src='/js/lib/chai/chai.js')
    link(rel='stylesheet', href='/js/lib/codemirror/lib/codemirror.css')
    link(rel='stylesheet', href='/js/lib/codemirror/addon/lint/lint.css')
    link(rel='stylesheet', href='/js/lib/codemirror/theme/monokai.css')
    link(rel="stylesheet", href="http://fonts.googleapis.com/css?family=Ubuntu+Mono")
    script(src='/js/lib/codemirror/mode/javascript/javascript.js')
    script(src='/js/lib/jailed/jailed.js')
    script(src='/js/lib/bonfire/bonfireInit.js')


    .row
        #mainEditorPanel.col-sm-12.col-md-7.col-xs-12
            .panel.panel-primary.panel-bonfire
                .panel-heading.text-center #{name} (Level #{difficulty} bonfire)
                .panel.panel-body
                    .well
                        .row.text-center
                            row.text-center
                                .col-xs-12
                                    .bonfire-instructions
                                        = brief
                                #brief-instructions.col-xs-12
                                    button#more-info.btn.btn-info
                                        span.ion-help-circled
                                        | More information
                            #long-instructions.row.text-center.hide
                                .col-xs-12
                                    .bonfire-instructions
                                        for sentence in details
                                            p!= sentence
                                    button#less-info.btn.btn-info
                                        span.ion-help-circled
                                        | Less information
                    form.code
                        .form-group.codeMirrorView
                            textarea#codeEditor(autofocus=true)
        #testCreatePanel.col-sm-12.col-md-5.col-xs-12
            .panel.panel-primary.panel-bonfire
                .panel-heading.text-center Output
                .panel.panel-body
                    #submitButton.btn.btn-primary.btn-big.btn-block Run code (ctrl + enter)
                    br
                    form.code
                        .form-group.codeMirrorView
                            textarea#codeOutput
                    br
                    ul#testSuite.list-group
                    br
                    script(type="text/javascript").
                        var tests = !{JSON.stringify(tests)};
                        var challengeSeed = !{JSON.stringify(challengeSeed)};
                        var challengeEntryPoint = !{JSON.stringify(challengeEntryPoint)};
                        var passedBonfireHash = !{JSON.stringify(bonfireHash)};
                        console.log(passedBonfireHash);
                    script(src='/js/lib/bonfire/bonfireFramework.js')


                #complete-bonfire-dialog.modal(tabindex='-1')
                    .modal-dialog.animated.zoomIn.fast-animation
                        .modal-content
                            .modal-header.challenge-list-header= compliment
                                a.close.closing-x(href='#', data-dismiss='modal', aria-hidden='true') ×
                            .modal-body(ng-controller="pairedWithController")

                                .text-center
                                    .animated.zoomInDown.delay-half
                                        span.landing-icon.ion-checkmark-circled.text-primary
                                - if (cc)
                                    form.form-horizontal(novalidate='novalidate', name='completedWithForm')
                                        .form-group.text-center
                                            .col-xs-10.col-xs-offset-1.col-sm-8.col-sm-offset-2.col-md-8.col-md-offset-2
                                                .input-group.twitter-input.animated.fadeIn
                                                    // extra field to distract password tools like lastpass from injecting css into our username field
                                                    input.form-control(ng-show="false")
                                                    span.input-group-addon @
                                                    input.form-control#completed-with(name="existingUser", placeholder="If you paired, enter your pair's username here", existing-username='', ng-model="existingUser", autofocus)
                                            .col-xs-10.col-xs-offset-1.col-sm-8.col-sm-offset-2.col-md-8.col-md-offset-2(ng-show="completedWithForm.$error.exists && !completedWithForm.existingUser.$pristine && existingUser.length > 0")
                                                alert(type='danger')
                                                    span.ion-close-circled
                                                    | Username not found

                                    a.animated.fadeIn.btn.btn-lg.btn-primary.btn-block.next-bonfire-button(name='_csrf', value=_csrf, aria-hidden='true', ng-disabled='completedWithForm.$invalid && existingUser.length > 0') Take me to my next challenge


                                    - if (points && points > 2)
                                        a.animated.fadeIn.btn.btn-lg.btn-block.btn-twitter(href="https://twitter.com/intent/tweet?text=I%20just%20#{verb}%20%40FreeCodeCamp%20Challenge%20%23#{number}:%20#{name}&url=http%3A%2F%2Ffreecodecamp.com/bonfires/#{number}&hashtags=learntocode, javascript" target="_blank")
                                            i.fa.fa-twitter &nbsp;
                                                = phrase
                                - else
                                    a.animated.fadeIn.btn.btn-lg.signup-btn.btn-block(href='/login') Sign in so you can save your progress
                #all-bonfires-dialog.modal(tabindex='-1')
                    .modal-dialog.animated.fadeInUp.fast-animation
                        .modal-content
                            .modal-header.challenge-list-header Bonfires
                                a.close.closing-x(href='#', data-dismiss='modal', aria-hidden='true') ×
                            .modal-body
                                include ../partials/bonfires
