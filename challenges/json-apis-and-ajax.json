{
  "name": "JSON APIs and Ajax",
  "order": 0.0065,
  "challenges": [
    {
      "id": "bb000000000000000000001",
      "title":  "Trigger on click Events with jQuery",
      "description": [
        "With jQuery we are able to get data from APIs via Ajax.",
        "This data normally comes in the form of <code>JSON</code>.",
        "Let's get the <code>Get Message</code> button to set the text of a <code>div</code> element.",
        "We will later use this to display the result of out API request.",
        "<code>$(\"#getMessage\").on(\"click\", function(){</code>",
        "<code>&thinsp;&thinsp;$(\".message\").html(\"Here is the message\");</code>",
        "<code>});</code>"
      ],
      "tests": [
        "assert(editor.match(/\\$\\s*?\\(\\s*?(?:'|\")\\#getMessage(?:'|\")\\s*?\\)\\s*?\\.on\\s*?\\(\\s*?(?:'|\")click(?:'|\")\\s*?\\,\\s*?function\\s*?\\(\\s*?\\)\\s*?\\{/gi), 'You should have bound the click event to the getMessage button.')",
        "assert(editor.match(/\\$\\s*?\\(\\s*?(?:'|\")\\.message(?:'|\")\\s*?\\)\\s*?\\.html\\s*?\\(\\s*?(?:'|\")Here\\sis\\sthe\\smessage(?:'|\")\\s*?\\);/gi), 'You should set te value of the #message box to be the message given in the description.')",
        "assert(editor.match(/\\n*?\\s*?\\}\\n*?\\s*?\\);/gi) && editor.match(/\\n*?\\s*?\\}\\);/gi).length >= 2, 'Make sure that you close off all of your functions.')"
      ],
      "challengeSeed": [
        "fccss",
        "  $(document).ready(function() {",
        "    ",
        "  });",
        "fcces",
        "",
        "<!-- You shouldn't need to modify code below this line -->",
        "",
        "<div class=\"container-fluid\">",
        " <div class = \"row text-center\">",
        "   <h2>Cat Photo Finder</h2>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12 well Message\">",
        "     The message will go here",
        "   </div>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12\">",
        "     <button id = \"getMessage\" class = \"btn btn-primary\">",
        "       Get Message",
        "     </button>",
        "   </div>",
        " </div>",
        "</div>"
      ],
      "challengeType": 0,
      "type": "waypoint"
    },
    {
      "id": "bb000000000000000000002",
      "title": "Create HTML from an AJAX Request",
      "description": [
        "",
        "We are now going to request data from an external source. (a file on FCC for the purposes of this exercise) The request will load in the data an run the code in the function we provide the data to which is known as the callback.",
        "Once we have the JSON we can modify or display it however we like so that it can be used elsewhere in the program and shown to the end user.",
        "<code>$(\"#getMessage\").on(\"click\", function() {",
        "<code>&thinsp;&thinsp;$.getJSON(\"/json/cats.json?callback=\", function( json ) {</code>",
        "<code>&thinsp;&thinsp;&thinsp;&thinsp;//Code to run when request is complete</code>",
        "<code>&thinsp;&thinsp;&thinsp;&thinsp;$(\".message\").html(JSON.stringify(json))</code>",
        "<code>&thinsp;&thinsp;});</code>",
        "<code>});</code>",
        "Let's make it so that the data sent from the request is appended to the .message div."
      ],
      "tests": [
        "assert(editor.match(/\\$\\s*?\\(\\s*?(\\\"|\\')\\#getMessage(\\\"|\\')\\s*?\\)\\s*?\\.\\s*?on\\s*?\\(\\s*?(\\\"|\\')click(\\\"|\\')\\s*?\\,\\s*?function\\s*?\\(\\s*?\\)\\s*?\\{/gi), 'You should have a click handler on the getMessage button to trigger the AJAX request.')",
        "assert(editor.match(/\\s*?\\}\\s*?\\)\\s*?\\;/gi), 'You should have at least on closing set of brackets and parenthesis.')",
        "assert(editor.match(/\\s*?\\}\\s*?\\)\\s*?\\;/gi) && editor.match(/\\,\\s*?function\\s*?\\(\\s*?\\w*?\\s*?\\)\\s*?\\{/gi) && editor.match(/\\s*?\\}\\s*?\\)\\s*?\\;/gi).length === editor.match(/\\s*?function\\s*?\\(\\s*?\\w*?\\s*?\\)\\s*?\\{/gi).length, 'Each callback function should have a closing set of brackets and parenthesis.')",
        "assert(editor.match(/\\$\\s*?\\.\\s*?getJSON\\s*?\\(\\s*?\"\\\/json\\\/cats\\.json\\?callback\\=\"\\s*?\\,\\s*?function\\s*?\\(\\s*?json\\s*?\\)\\s*?\\{/gi), 'You should be making use of the getJSON method given in the description to load data from the json file.')",
        "assert(editor.match(/\\$\\s*?\\(\\s*?\\\"\\.message\\\"\\s*?\\)\\s*?\\.\\s*?html\\s*?\\(\\s*?JSON\\s*?\\.\\s*?stringify\\s*?\\(\\s*?json\\s*?\\)\\s*?\\)/gi), 'Don\\'t forget to make the <code>.html</code> change the contents of the message box so that it contains the result of the getJSON.')"
      ],
      "challengeSeed": [
        "fccss",
        " $(document).ready(function() {",
        "   ",
        "   $(\"#getMessage\").on(\"click\", function(){",
        "     $(\".message\").html(\"Make the result of the getJSON request appear here\")",
        "   });",
        "   ",
        " });",
        "fcces",
        "",
        "<div class=\"container-fluid\">",
        " <div class = \"row text-center\">",
        "   <h2>Cat Photo Finder</h2>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12 well Message\">",
        "     The message will go here",
        "   </div>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12\">",
        "     <button id = \"getMessage\" class = \"btn btn-primary\">",
        "       Get Message",
        "     </button>",
        "   </div>",
        " </div>",
        "</div>"
      ],
      "challengeType": 0,
      "type": "waypoint"
    },
    {
      "id": "bb000000000000000000003",
      "title":  "Convert JSON Data to HTML",
      "description": [
        "Now that we have the data let's re-arrange it so that it can be displayed in a user friendly way.",
        "We can use the <code>.map</code> method to iterate through the data and transform it in some way.",
        "This will allow us to perform math operations on certain parts of the data or rearrange it to make it nice to display.",
        "<code>json.map(function(val) {</code>",
        "<code>&thinsp;&thinsp;html = html + \"&lt;div class = 'cat'&gt;\"</code>",
        "<code>&thinsp;&thinsp;for(var key in val) {</code>",
        "<code>&thinsp;&thinsp;&thinsp;&thinsp;html = html + '&lt;div class = \"' + key + '\"&gt;' + val[key] + '&lt;/div&gt;';</code>",
        "<code>&thinsp;&thinsp;}</code>",
        "<code>&thinsp;&thinsp;html = html + \"&lt;/div&gt;&lt;br/&gt;\"</code>",
        "<code>});</code>"
      ],
      "tests": [
        "assert(/json\\.map/gi, 'The message box should have something in it.')"
    ],
      "challengeSeed": [
        "fccss",
        " $(document).ready(function() {",
        "   ",
        "   $(\"#getMessage\").on(\"click\", function() {",
        "       $.getJSON(\"/json/cats.json?callback=\", function( json ) {",
        "       ",
        "       var html = \"\";",
        "       ",
        "       // You shouldn't need to modify code above this line.",
        "       ",
        "       ",
        "       ",
        "       ",
        "       // You shouldn't need to modify code below this line.",
        "       ",
        "          $(\".message\").html(html);",
        "       ",
        "       });",
        "   });",
        "   ",
        " });",
        "fcces",
        "",
        "<div class=\"container-fluid\">",
        " <div class = \"row text-center\">",
        "   <h2>Cat Photo Finder</h2>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12 well Message\">",
        "     The message will go here","   </div>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12\">",
        "     <button id = \"getMessage\" class = \"btn btn-primary\">",
        "       Get Message",
        "     </button>",
        "   </div>",
        " </div>",
        "</div>"
      ],
      "challengeType": 0,
      "type": "waypoint"
    },
    {
      "id": "bb000000000000000000004",
      "title":  "ender those images!",
      "description": [
        "Instead of just placing everything in a div we should check if the value is an image.",
        "If it is an image we should use it as an ima tag instead so that the image is rendered.",
        "<code>if(key === \"imageLink\") {</code>",
        "<code>&thinsp;&thinsp;html = html + '&lt;img class = \"' + key + '\"src = \"' + val[key] + '\"&gt;';</code>",
        "<code>} else {</code>",
        "<code>&thinsp;&thinsp;html = html + '&lt;div class = \"' + key + '\"&gt;' + val[key] + '&lt;/div&gt;';</code>",
        "<code>}</code>"
      ],
      "tests": [
        "assert(editor.match(/imageLink/gi), 'You should have accessed the imageLink of each cat object.')"
      ],
      "challengeSeed": [
        "fccss",
        "$(document).ready(function() {",
        "   ",
        "   $(\"#getMessage\").on(\"click\", function() {",
        "       $.getJSON(\"/json/cats.json?callback=\", function( json ) {",
        "       ",
        "       var html = \"\";",
        "       ",
        "       //Add you code to modify the data here. It should add it to the html sting for use in the view",
        "       ",
        "        json.map(function(val){",
        "",
        "          html = html + \"<div class = 'cat'>\"",
        "",
        "          for(var key in val){",
        "",
        "            // You shouldn't need to modify code below this line",
        "         ",
        "         ",
        "         ",
        "            // You shouldn't need to modify code above this line",
        "",
        "          }",
        "         ",
        "          html = html + \"</div>\"",
        "",
        "        });",
        "       ",
        "          $(\".message\").html(html);",
        "       ",
        "       });",
        "   });",
        "   ",
        " });",
        "fcces",
        "",
        "<div class=\"container-fluid\">",
        " <div class = \"row text-center\">",
        "   <h2>Cat Photo Finder</h2>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12 well Message\">",
        "     The message will go here",
        "   </div>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12\">",
        "     <button id = \"getMessage\" class = \"btn btn-primary\">",
        "       Get Message",
        "     </button>",
        "   </div>",
        " </div>",
        "</div>",
        ""
      ],
      "challengeType": 0,
      "type": "waypoint"
    },
    {
      "id": "bb000000000000000000005",
      "title":  "Prefilter your JSON",
      "description": [
        "",
        "This means we should never hit API limits and it will make the process more efficient.",
        "Let's try pre-filtering the json before we map it.",
        "We can use the pre-made filter method like this to remove the cat with the id of 1.",
        "<code>json = json.filter(function(val) {</code>",
        "<code>&thinsp;&thinsp;return(val.id !== 1);</code>",
        "<code>});</code>"
      ],
      "tests": [
        "assert(editor.match(/filter/gi), 'You should be making use of the .filter method.')"
      ],
      "challengeSeed": [
        "fccss",
        "$(document).ready(function() {",
        "   ",
        "   $(\"#getMessage\").on(\"click\", function() {",
        "       $.getJSON(\"/json/cats.json?callback=\", function( json ) {",
        "       ",
        "       var html = \"\";",
        "       ",
        "       //Add you code to modify the data here. It should add it to the html sting for use in the view",
        "       ",
        "        json.map(function(val){",
        "",
        "          val = \"<img src = '\" + val.imageLink + \"'/>\" ",
        "",
        "          html = html + \"<div class = 'cat'>\"",
        "",
        "          // You shouldn't need to modify code above this line",
        "         ",
        "         ",
        "         ",
        "          // You shouldn't need to modify code below this line",
        "",
        "          for(var key in val){",
        "",
        "            html = html + '<div class = \"' + key + '\">' + val[key] + '</div>';",
        "",
        "          }",
        "",
        "         ",
        "          html = html + \"</div>\"",
        "",
        "        });",
        "       ",
        "          $(\".message\").html(html);",
        "       ",
        "       });",
        "   });",
        "   ",
        " });",
        "fcces",
        "",
        "",
        "<div class=\"container-fluid\">",
        " <div class = \"row text-center\">",
        "   <h2>Cat Photo Finder</h2>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12 well Message\">",
        "     The message will go here",
        "   </div>",
        " </div>",
        " <div class = \"row text-center\">",
        "   <div class = \"col-xs-12\">",
        "     <button id = \"getMessage\" class = \"btn btn-primary\">",
        "       Get Message",
        "     </button>",
        "   </div>",
        " </div>",
        "</div>",
        ""
      ],
      "challengeType": 0,
      "type": "waypoint"
    },
    {
      "id": "bb000000000000000000006",
      "title":  "Get Geo-location Data",
      "description": [
        "We can access the users current location by using the built in navigator in the browser.",
        "The navigator will get the users current longitude and latitude with a decent level of accuracy.",
        "<code>if (navigator.geolocation) {</code>",
        "<code>&thinsp;&thinsp;navigator.geolocation.getCurrentPosition(function(position) {</code>",
        "<code>&thinsp;&thinsp;&thinsp;&thinsp;// Do something in here with the coordinates</code>",
        "<code>&thinsp;&thinsp;&thinsp;&thinsp;$(\"#data\").html(\"latitiude\" + position.coords.latitude + \"longitude\" + position.coords.longitude);</code>",
        "<code>&thinsp;&thinsp;});</code>",
        "<code>}</code>"
      ],
      "tests": [
        "assert(editor.match(/navigator\\.geolocation\\.getCurrentPosition/gi), 'You should make use of the <code>navigator.geolocation</code> to access the users current location.')"
      ],
      "challengeSeed": [
        "fccss",
        "",
        "fcces",
        "<div id = \"data\">",
        "  <h4>You are here!</h4>",
        "  ",
        "</div>"
      ],
      "challengeType": 0,
      "type": "waypoint"
    }
  ]
}
